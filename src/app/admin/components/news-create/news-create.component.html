<div class="container">
  <mat-toolbar class="toolbar toolbar-title">
    <span>{{headerTitle}}</span>
  </mat-toolbar>

  <mat-card>
    <mat-spinner *ngIf="isLoading"></mat-spinner>

    <form
      [formGroup]="newsCreateForm"
      (submit)="onAddNews()"
      *ngIf="!isLoading"
    >
      <mat-form-field class="form-input">
        <mat-label>Haber Başlığı</mat-label>
        <input
          matInput
          type="text"
          formControlName="title"
          placeholder="Başlık (en fazla 200 karakter)"
        >
        <mat-error *ngIf="newsCreateForm.get('title').invalid">Lütfen haber başlığı giriniz!</mat-error>
      </mat-form-field>

      <mat-form-field class="form-input">
        <mat-label>Haber Metni</mat-label>
        <textarea
          matInput
          type="text"
          formControlName="content"
          placeholder="Metin (en fazla 2000 karakter)"
          rows="8"
        ></textarea>
        <mat-error *ngIf="newsCreateForm.get('content').invalid">Lütfen haber metni giriniz!</mat-error>
      </mat-form-field>

      <div class="row">
        <div class="col-md-3">
          <button
            mat-stroked-button
            type="button"
            color="primary"
            (click)="filePicker.click()"
            >Resim Seç</button>
          <input type="file" #filePicker (change)="onFilePicked($event)">

          <div class="image-preview" *ngIf="imagePreview !== '' && imagePreview && newsCreateForm.get('newsImage').valid">
            <img [src]="imagePreview" [alt]="newsCreateForm.value.title">
          </div>
          <mat-error *ngIf="!newsCreateForm.get('newsImage').valid">Lütfen geçerli bir resim seçiniz! (en fazla 5MB)</mat-error>

        </div>
        <div class="col-md-3"></div>
        <div class="col-md-3"></div>
        <div class="col-md-3">
          <mat-form-field class="form-input">
            <mat-label>Yayında mı?</mat-label>
            <mat-select
              matInput
              formControlName="isOnline"
              placeholder="Evet"
              >
              <mat-option [value]="true">Evet</mat-option>
              <mat-option [value]="false">Hayır</mat-option>
            </mat-select>
            <mat-error *ngIf="newsCreateForm.get('isOnline').invalid">Lütfen bir değer seçiniz!</mat-error>
          </mat-form-field>
        </div>
      </div>




      <button
        mat-raised-button
        color="primary"
        type="submit"
      >Oluştur</button>

      <button
        mat-raised-button
        type="button"
        (click)="onClearNewsForm()"
      >Temizle</button>
    </form>
  </mat-card>
</div>
